!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t){t.exports=JSON.parse('{"a":"Mon, 10 Feb 2020 14:48:19 GMT"}')},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var o=!0,s=!0,r=!0,a=20,h=20,d=8,l=100,c=20,u=1,p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,p;return e=t,p=[{key:"truthyBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.getFormmatedOptions(e,n),o="M ".concat(i.strokeWidth/2,",").concat(4+i.strokeWidth/2),s="a 4 4 0 0 1 4,-4",r="a 4 4 0 0 0 -4,4",a="a 4 4 0 0 0 4,4",h="a 4 4 0 0 1 4,4",d="a 4 4 0 0 1 -4,4",l="a 4 4 0 0 1 -4,-4",c="v".concat(i.truthyHeight-8),u="h 8",p="h -8",_="v 24",y="v".concat(i.lineHeight+i.strokeWidth),f="h".concat(64-i.totalWidth+i.strokeWidth),v="h".concat(i.totalWidth-64-i.strokeWidth),m="h".concat(i.totalWidth-52-i.strokeWidth),g="h".concat(52-i.totalWidth+i.strokeWidth),x="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",C="h 36",k="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",N="h -36",b="z",w=o+s+u+x+m+h+y+d+f+k+p+r+c+a+u+(i.truthy?x:C)+v+h+_+d+g+(i.next?k:N)+p+l+b,O=i.totalWidth,H=i.truthyHeight+i.lineHeight+2*i.strokeWidth+(i.next?48:40);return{path:w,dimensions:{width:"".concat(O,"px"),height:"".concat(H,"px"),"stroke-width":"".concat(i.strokeWidth,"px"),fittingHeight:H-(i.next?8:0)-i.strokeWidth,description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+8,left:i.strokeWidth},truthy:{width:i.totalWidth-12,height:i.truthyHeight+i.strokeWidth,top:i.lineHeight+8+i.strokeWidth,left:12},next:i.next?{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:H-(i.next?8:0)-i.strokeWidth,left:0}:void 0}}}},{key:"truthyFalsyBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.getFormmatedOptions(e,n),o="M ".concat(i.strokeWidth/2,",").concat(4+i.strokeWidth/2),s="a 4 4 0 0 1 4,-4",r="a 4 4 0 0 0 -4,4",a="a 4 4 0 0 0 4,4",h="a 4 4 0 0 1 4,4",d="a 4 4 0 0 1 -4,4",l="a 4 4 0 0 1 -4,-4",c="v".concat(i.truthyHeight-8),u="v".concat(i.falsyHeight-8),p="h 8",_="h -8",y="v 24",f="v".concat(i.lineHeight+i.strokeWidth),v="h".concat(64-i.totalWidth+i.strokeWidth),m="h".concat(i.totalWidth-64-i.strokeWidth),g="h".concat(i.totalWidth-52-i.strokeWidth),x="h".concat(52-i.totalWidth+i.strokeWidth),C="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",k="h 36",N="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",b="z",w=o+s+p+C+g+h+f+d+v+N+_+r+c+a+p+(i.truthy?C:k)+m+h+y+d+v+N+_+r+u+a+p+(i.falsy?C:k)+m+h+y+d+x+N+_+l+b,O=i.totalWidth,H=i.truthyHeight+i.falsyHeight+i.lineHeight+2*i.strokeWidth+80;return{path:w,dimensions:{width:"".concat(O,"px"),height:"".concat(H,"px"),fittingHeight:H-8-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+8,left:i.strokeWidth},truthy:{width:i.totalWidth-12,height:i.truthyHeight+i.strokeWidth,top:i.lineHeight+8+i.strokeWidth,left:12},falsy:{width:i.totalWidth-12,height:i.falsyHeight+i.strokeWidth,top:i.lineHeight+8+i.truthyHeight+i.strokeWidth+32,left:12},next:{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:H-8-i.strokeWidth,left:0}}}}},{key:"statement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.getFormmatedOptions(e,n),o="M ".concat(i.strokeWidth/2,",").concat(4+i.strokeWidth/2),s="a 4 4 0 0 1 4,-4",r="a 4 4 0 0 1 4,4",a="a 4 4 0 0 1 -4,4",h="a 4 4 0 0 1 -4,-4",d="h 8",l="h -8",c="v".concat(i.lineHeight+i.strokeWidth),u="h".concat(i.totalWidth-52-i.strokeWidth),p="h".concat(52-i.totalWidth+i.strokeWidth),_="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",y="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",f="h -36",v="z",m=o+s+d+_+u+r+c+a+p+(i.next?y:f)+l+h+v,g=i.totalWidth,x=i.lineHeight+2*i.strokeWidth+(i.next?16:8);return{path:m,dimensions:{width:"".concat(g,"px"),height:"".concat(x,"px"),fittingHeight:x-(i.next?8:0)-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+8,left:i.strokeWidth},next:i.next?{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:x-(i.next?8:0)-i.strokeWidth,left:0}:void 0}}}},{key:"event",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.getFormmatedOptions(e,n),o="M ".concat(i.strokeWidth/2,",").concat(17+i.strokeWidth/2),s="c 25,-22 71,-22 96,0",r="a 4 4 0 0 1 4,4",a="a 4 4 0 0 1 -4,4",h="a 4 4 0 0 1 -4,-4",d="h -8",l="v".concat(i.lineHeight-4),c="h".concat(i.totalWidth-100-i.strokeWidth),u="h".concat(52-i.totalWidth+i.strokeWidth),p="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",_="z",y=o+s+c+r+l+a+u+p+d+h+_,f=i.totalWidth,v=i.lineHeight+29+i.strokeWidth;return{path:y,dimensions:{width:"".concat(f,"px"),height:"".concat(v,"px"),fittingHeight:v-8-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+20,left:i.strokeWidth},next:{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:v-8-i.strokeWidth,left:0}}}}},{key:"function",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.getFormmatedOptions(e,n),o="M ".concat(i.strokeWidth/2,",").concat(20+i.strokeWidth/2),s="a 20 20 0 0 1 20,-20",r="a 20 20 0 0 1 20,20",a="a 4 4 0 0 1 -4,4",h="a 4 4 0 0 1 -4,-4",d="h -8",l="v".concat(i.lineHeight-6),c="h".concat(i.totalWidth-40-i.strokeWidth),u="h".concat(52-i.totalWidth+i.strokeWidth),p="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",_="z",y=o+s+c+r+l+a+u+p+d+h+_,f=i.totalWidth,v=i.lineHeight+i.strokeWidth+26;return{path:y,dimensions:{width:"".concat(f,"px"),height:"".concat(v,"px"),fittingHeight:v-8-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+17,left:i.strokeWidth},next:{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:v-8-i.strokeWidth,left:0}}}}},{key:"getFormmatedOptions",value:function(t,e){var n=e.fitting||{},i=e.attributes||{};return{nextHeight:t.nextHeight||d,totalWidth:parseInt(i.style.width,10)||l,lineHeight:parseInt(i.style["line-height"],10)||c,strokeWidth:parseInt(i.style["stroke-width"],10)||u,truthyHeight:t.truthyHeight||a,falsyHeight:t.falsyHeight||h,next:void 0===n.next?r:n.next,truthy:void 0===n.truthy?o:n.truthy,falsy:void 0===n.falsy?s:n.falsy}}}],(n=null)&&i(e.prototype,n),p&&i(e,p),t}();function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"createNodeElement",value:function(t){var e=document.createElement("div");return e.innerHTML=t,1===e.children.length?e.children[0]:e.children}},{key:"isTouch",value:function(){var t=" -webkit- -moz- -o- -ms- ".split(" "),e=window.matchMedia?function(t){return window.matchMedia(t).matches}:void 0;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var n=["(",t.join("touch-enabled),("),"heartz",")"].join("");return!!e&&e(n)}}],(n=null)&&_(e.prototype,n),i&&_(e,i),t}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"deepCopy",value:function(e,n){Object.keys(n).forEach((function(i){t.isArray(n[i])?e[i]=n[i].map((function(t){return t})):t.isObject(n[i])?t.deepCopy(e[i]={},n[i]):e[i]=n[i]}))}},{key:"merge",value:function(e,n){Object.keys(n).forEach((function(i){t.isObject(n[i])?(t.isObject(e[i])||(e[i]={}),t.merge(e[i],n[i])):e[i]=n[i]}))}},{key:"toArray",value:function(t){return t?Object.keys(t).map((function(e){return t[e]})):t}},{key:"deepClone",value:function(e){var n={};return t.deepCopy(n,e),n}},{key:"isObject",value:function(t){return null!==t&&"object"===f(t)&&!Array.isArray(t)}},{key:"isArray",value:function(t){return Array.isArray(t)&&"object"===f(t)}},{key:"hasTheSamePropertiesAndValues",value:function(e,n){if("object"!==f(e)||"object"!==f(n)||!e||!n)return e===n;var i=t.toArray(e),o=t.toArray(n);if(i.length!==o.length)return!1;var s=i.map((function(e,n){return t.hasTheSamePropertiesAndValues(e,o[n])}));return!s||!s.length||s.reduce((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;return e&&t}))}}],(n=null)&&v(e.prototype,n),i&&v(e,i),t}();function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"isContainerCoincident",value:function(e,n){return!(!e||!n)&&t.isHorizontalCoincident(e,n)&&t.isVerticalCoincident(e,n)}},{key:"isHorizontalCoincident",value:function(e,n){var i={start1:e.left,end1:e.right,start2:n.left,end2:n.right};return t.isLineCoincident(i)}},{key:"isVerticalCoincident",value:function(e,n){var i={start1:e.top,end1:e.bottom,start2:n.top,end2:n.bottom};return t.isLineCoincident(i)}},{key:"isLineCoincident",value:function(t){var e=t.start1,n=t.start2,i=t.end1,o=t.end2;return e<=n&&i>=n||e<=o&&i>=o||n<=e&&i<=o}},{key:"isValidShapeName",value:function(t){return"string"==typeof t&&"function"==typeof p[t]}},{key:"createComponentHTML",value:function(e,n,i){var o=m.deepClone(i.attributes);m.merge(o.style,n);var s=t.createStringOfAttributes(o.style,": ","; "),r=t.createStringOfAttributes(o,'="','" ','"'),a=t.createContainers(n);return"<div ".concat(r,' style="').concat(s,'">')+'<svg style="width: 100%; height: 100%">'+'<path d="'.concat(e,'" /></svg>')+"".concat(a,"</div></div>")}},{key:"createContainers",value:function(e){return t.createContainerHTML("scratch-previous-container",{height:1,width:e.width})+t.createContainerHTML("scratch-description-container",e.description)+t.createContainerHTML("scratch-truthy-container",e.truthy)+t.createContainerHTML("scratch-falsy-container",e.falsy)+(e.next?'<div class="scratch-next-container" '+'style="width: 100%; height: '.concat(e.next.height,"px; ")+"top: ".concat(e.fittingHeight,"px; ")+'left: 0px; position: absolute;">':"")}},{key:"createContainerHTML",value:function(t,e){return e?'<div class="'.concat(t||"",'" style="position: absolute; ')+"width: ".concat(e.width||0,"px; ")+"height: ".concat(e.height||0,"px; ")+"top: ".concat(e.top||0,"px; ")+"left: ".concat(e.left||0,'px"></div>'):""}},{key:"createStringOfAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object.keys(t).map((function(n){return"string"==typeof t[n]?"".concat(n+e+t[n]):""})).filter((function(t){return""!==t})).join(n)+i}},{key:"updateContainerDimensions",value:function(t,e,n){t.style.setProperty("top","".concat(n.top,"px"))}},{key:"getContainerTopLeftOffset",value:function(t){return{top:parseInt(t.style.top,10)||0,left:parseInt(t.style.left,10)||0}}}],(n=null)&&g(e.prototype,n),i&&g(e,i),t}(),C={attributes:{class:"",id:"",style:{position:"absolute",width:"120px","stroke-width":"1px","line-height":"24px"}},fitting:{truthy:!0,falsy:!0,next:!0},propagateClassNameToNestedElements:!1,isPreview:!1};function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=[],w=y.isTouch(),O={},H=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(k(this,t),x.isValidShapeName(e))this._shapeNameConstructor(e,n);else{if(!(e instanceof t))throw new Error("Invalid shapeNameOrComponentInstance");this._componentInstanceConstructor(e,n)}this._opt.isPreview||(b.push(this),this._id=b.length)}var e,n,i;return e=t,(n=[{key:"_shapeNameConstructor",value:function(t,e){this._initializeProperties(t),this._assingOptions(e),this._createDOMNode(t),this._createNodeShortcuts(),this._assignCoincidenceHandlers(),this._allowElementToBeCoincidentWithOthers(),this._assignMovementHandler()}},{key:"_componentInstanceConstructor",value:function(t,e){this._initializeProperties(t._shapeName),this._copyAndAssignOptionsFromComponent(t,e),this._createDOMNode(this._shapeName),this._createNodeShortcuts(),this._allowElementToBeCoincidentWithOthers(),this._createNestedComponents(t),this._assignCoincidenceHandlers(),this._assignMovementHandler()}},{key:"_initializeProperties",value:function(t){this._shapeName=t,this._DOMNode=null,this._svg=null,this._truthy=null,this._falsy=null,this._next=null,this._parent=null,this._id=0,this._opt={},this._containers={},this._dimensions={},this._addElements={},this._lastCoincidence={},this._lastReverseCoincidence={},this._resizeListeners=[],this._handleContainerCoincidence={},this._truthyResizeHandlerBinded=this._truthyResizeHandler.bind(this),this._falsyResizeHandlerBinded=this._falsyResizeHandler.bind(this),this._nextResizeHandlerBinded=this._nextResizeHandler.bind(this),this._movementHandlerBinded=this._movementHandler.bind(this)}},{key:"_assingOptions",value:function(t){m.merge(this._opt,C),m.merge(this._opt,t)}},{key:"_copyAndAssignOptionsFromComponent",value:function(t,e){m.deepCopy(this._opt,t._opt),m.merge(this._opt,e)}},{key:"_createDOMNode",value:function(t){var e=p[t](this._dimensions,this._opt),n=e.path,i=e.dimensions,o=x.createComponentHTML(n,i,this._opt);this._DOMNode=y.createNodeElement(o),m.merge(this._dimensions,i)}},{key:"_createNodeShortcuts",value:function(){var t=this._DOMNode.children,e=t.length;this._svg=t[0],this._path=this._svg.children[0],this._containers.description=t[2],e>3&&(this._containers.truthy=t[3].className.includes("truthy")?t[3]:null),e>4&&(this._containers.falsy=t[4].className.includes("falsy")?t[4]:null),this._containers.next=t[e-1].className.includes("next")?t[e-1]:null}},{key:"_assignCoincidenceHandlers",value:function(){var t=this;this._handleContainerCoincidence={truthy:function(e){e._truthy!==O.component&&(t._removeAnyPreviewContainer(),e._truthy&&!O.component.addNext(e._truthy,"last")||(e.addTruthy(O.component),O.removeMethod=e.removeTruthy.bind(e),O.addMethodName="addTruthy",t._adjustAllIndexesAndMadeThisOnTheTop()))},falsy:function(e){e._falsy!==O.component&&(t._removeAnyPreviewContainer(),e._falsy&&!O.component.addNext(e._falsy,"last")||(e.addFalsy(O.component),O.removeMethod=e.removeFalsy.bind(e),O.addMethodName="addFalsy",t._adjustAllIndexesAndMadeThisOnTheTop()))},next:function(e){e._next!==O.component&&(t._removeAnyPreviewContainer(),e._next&&!O.component.addNext(e._next,"last")||(e.addNext(O.component),O.removeMethod=e.removeNext.bind(e),O.addMethodName="addNext",t._adjustAllIndexesAndMadeThisOnTheTop()))}}}},{key:"_handleReverseNextContainerCoincidence",value:function(t){if(!O.component._isDescendantOrTheSameComponent(t)){this._removeAnyPreviewContainer();var e=t._DOMNode.getBoundingClientRect();if(!t._parent&&O.component.addNext(t,"last")){document.body.appendChild(O.component._DOMNode),O.nextChild=t;var n=t._DOMNode.getBoundingClientRect();this._adjustPreviewPosition(e,n),this._adjustAllIndexesAndMadeThisOnTheTop()}}}},{key:"_adjustPreviewPosition",value:function(t,e){var n=e.top-t.top,i=e.left-t.left,o=x.getContainerTopLeftOffset(O.component._DOMNode),s={top:o.top-n,left:o.left-i};O.component._DOMNode.style.setProperty("top","".concat(s.top,"px")),O.component._DOMNode.style.setProperty("left","".concat(s.left,"px"))}},{key:"_allowElementToBeCoincidentWithOthers",value:function(){this._addElements={truthy:this._containers.truthy,falsy:this._containers.falsy,next:this._containers.next,previous:"function"!==this._shapeName&&"event"!==this._shapeName}}},{key:"_assignMovementHandler",value:function(){var t=w?"touchstart":"mousedown";this._path.addEventListener(t,this._movementHandlerBinded),this._containers.description.addEventListener(t,this._movementHandlerBinded),this._updateMovementEventListeners()}},{key:"_updateMovementEventListeners",value:function(){if(w){var t=this._containers,e=t.truthy,n=t.falsy;e&&(this._truthy?e.removeEventListener("touchstart",this._movementHandlerBinded):e.addEventListener("touchstart",this._movementHandlerBinded)),n&&(this._falsy?n.removeEventListener("touchstart",this._movementHandlerBinded):n.addEventListener("touchstart",this._movementHandlerBinded))}}},{key:"_movementHandler",value:function(t){var e=this,n=t.touches?t.touches[0]:t,i=n.clientX,o=n.clientY,s=this._DOMNode.getBoundingClientRect(),r=s.top,a=s.left;this._DOMNode.setAttribute("data-grabbing",!0),this._adjustAllIndexesAndMadeThisOnTheTop(),this._createPreviewComponent();var h=function(t){var n=t.touches?t.touches[0]:t,s=n.clientX,h=n.clientY;e._DOMNode.parentElement!==document.body&&(document.body.appendChild(e._DOMNode),e._parent.removeChild(e));var d=s-i,l=h-o;e._DOMNode.style.setProperty("left","".concat(d+a,"px")),e._DOMNode.style.setProperty("top","".concat(l+r,"px")),e._checkForCoincidence()};window.addEventListener(w?"touchmove":"mousemove",h),window.addEventListener(w?"touchend":"mouseup",(function t(){window.removeEventListener(w?"touchmove":"mousemove",h),window.removeEventListener(w?"touchend":"mouseup",t),e._DOMNode.setAttribute("data-grabbing",!1),e._finishPreviewComponent()}))}},{key:"_createNestedComponents",value:function(e){var n={attributes:{class:this._opt.propagateClassNameToNestedElements?this._opt.attributes.class:""},isPreview:this._opt.isPreview};e._truthy&&this.addTruthy(new t(e._truthy,n)),e._falsy&&this.addFalsy(new t(e._falsy,n)),e._next&&this.addNext(new t(e._next,n))}},{key:"_removeAnyPreviewContainer",value:function(){this._removePreviewContainer(),this._removeReversePreviewContainer()}},{key:"_removePreviewContainer",value:function(){if(O.removeMethod){var t=O.component._parent,e=O.component._getDeepestNextPreviewChild()._next;O.removeMethod(O.component),O.removeMethod=null,e&&t[O.addMethodName](e,!0)}}},{key:"_removeReversePreviewContainer",value:function(){var t=O.nextChild;if(O.nextChild){var e=t._DOMNode.getBoundingClientRect(),n=e.top,i=e.left;t._DOMNode.style.setProperty("top","".concat(n,"px")),t._DOMNode.style.setProperty("left","".concat(i,"px")),t._parent.removeNext(t),document.body.appendChild(t._DOMNode),t._parent=null,document.body.removeChild(O.component._DOMNode),O.nextChild=null}}},{key:"_createPreviewComponent",value:function(){var e=parseInt(this._DOMNode.style.zIndex,10)-1;O.component=new t(this,{attributes:{class:"shadow",style:{top:"0px",left:"0px","z-index":"".concat(e)}},propagateClassNameToNestedElements:!0,isPreview:!0})}},{key:"_checkForCoincidence",value:function(){this._lastCoincidence.found=this._getAndHandleCoincidentComponent(),this._lastCoincidence.found||(this._checkForReverseCoincidence(),O.component&&this._removePreviewContainer())}},{key:"_finishPreviewComponent",value:function(){this._lastCoincidence.found?this._handleCoincidentComponent():this._lastReverseCoincidence.found&&this._handleReverseCoincidentComponent(),O.component=null,O.removeMethod=null,O.addMethodName="",O.nextChild=null}},{key:"_getAndHandleCoincidentComponent",value:function(){for(var t=this.getHitContainer(),e=0;e<b.length;e+=1)if(this._addElements.previous&&this._handleComponentCoincidence(b[e],t))return b[e];return null}},{key:"_handleComponentCoincidence",value:function(t,e){if(this._isDescendantOrTheSameComponent(t)||t._opt.isPreview)return!1;var n=t.getContainerCoincidences(e),i=Object.keys(n).find((function(t){return n[t]}));return!!i&&(this._handleContainerCoincidence[i](t),this._lastCoincidence.containerName=i,!0)}},{key:"_isDescendantOrTheSameComponent",value:function(t){return t===this||this._truthy===t||this._falsy===t||this._next===t||!(!this._truthy||!this._truthy._isDescendantOrTheSameComponent(t))||!(!this._falsy||!this._falsy._isDescendantOrTheSameComponent(t))||!(!this._next||!this._next._isDescendantOrTheSameComponent(t))}},{key:"_checkForReverseCoincidence",value:function(){return this._lastReverseCoincidence.found=this._getAndHandleReverseCoincidentComponent(),this._lastReverseCoincidence.found?this._lastReverseCoincidence.found:(this._removeReversePreviewContainer(),this._next&&(this._lastReverseCoincidence.found=this._next._checkForReverseCoincidence()),this._lastReverseCoincidence.found)}},{key:"_getAndHandleReverseCoincidentComponent",value:function(){for(var t=0;t<b.length;t+=1)if(b[t]._addElements.previous&&this._handleReverseComponentCoincidence(b[t]))return b[t];return null}},{key:"_handleReverseComponentCoincidence",value:function(t){return!(this._isDescendantOrTheSameComponent(t)||t._opt.isPreview||t._parent&&!t._parent._opt.isPreview||t===this._parent||!this.getContainerCoincidences(t.getHitContainer()).next||this._next||(this._handleReverseNextContainerCoincidence(t),this._lastReverseCoincidence.containerName="next",0))}},{key:"_handleCoincidentComponent",value:function(){var t=this._lastCoincidence.containerName;"truthy"===t?(this._removePreviewContainer(),this._lastCoincidence.found.addTruthy(this,"first")):"falsy"===t?(this._removePreviewContainer(),this._lastCoincidence.found.addFalsy(this,"first")):"next"===t&&(this._removePreviewContainer(),this._lastCoincidence.found.addNext(this,"first"))}},{key:"_handleReverseCoincidentComponent",value:function(){var t=O.component._DOMNode.getBoundingClientRect(),e=t.top,n=t.left;this._DOMNode.style.setProperty("top","".concat(e,"px")),this._DOMNode.style.setProperty("left","".concat(n,"px")),this._removeReversePreviewContainer(),this.addNext(this._lastReverseCoincidence.found,"last")}},{key:"_clearComponentAbsoluteCoordinates",value:function(){this._DOMNode.style.setProperty("top","0px"),this._DOMNode.style.setProperty("left","0px")}},{key:"_truthyResizeHandler",value:function(e){e instanceof t&&this._resize({truthyHeight:e._getFittingHeight()})}},{key:"_falsyResizeHandler",value:function(e){e instanceof t&&this._resize({falsyHeight:e._getFittingHeight()})}},{key:"_nextResizeHandler",value:function(e){e instanceof t&&this._resize({nextHeight:e._getFittingHeight()})}},{key:"_resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.merge(this._dimensions,t),this._updateFittingVisibility();var e=p[this._shapeName](this._dimensions,this._opt),n=e.path,i=e.dimensions;this._DOMNode.style.setProperty("width",i.width),this._DOMNode.style.setProperty("height",i.height),this._svg.children[0].setAttribute("d",n),this._updateContainerDimensions(i),m.merge(this._dimensions,i),this._callResizeListeners()}},{key:"_updateFittingVisibility",value:function(){this._opt.fitting.truthy=!this._truthy||this._truthy._getNextFitting(),this._opt.fitting.falsy=!this._falsy||this._falsy._getNextFitting()}},{key:"_getNextFitting",value:function(){return this._next?this._next._getNextFitting():this._opt.fitting.next}},{key:"_getFittingHeight",value:function(){return this._dimensions.fittingHeight+(this._next?this._next._getFittingHeight():0)}},{key:"_updateContainerDimensions",value:function(t){var e=t.truthy,n=t.falsy,i=t.next;this._containers.truthy&&e&&x.updateContainerDimensions(this._containers.truthy,i,e),this._containers.falsy&&n&&x.updateContainerDimensions(this._containers.falsy,i,n),this._containers.next&&this._containers.next.style.setProperty("top","".concat(t.fittingHeight,"px"))}},{key:"_callResizeListeners",value:function(){var t=this;this._resizeListeners.forEach((function(e){return e(t)}))}},{key:"addTruthy",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no-replace";if(!(e instanceof t)||!this._addElements.truthy||e._isDescendantOrTheSameComponent(this))return!1;if(this._truthy&&"no-replace"===n)return!1;if(this._truthy&&"last"===n)return this._truthy.addNext(e,"last");if(this._truthy&&"first"===n&&!e.addNext(this._truthy,"last"))return!1;e._parent&&e._parent.removeChild(e),this.removeTruthy(),this._truthy=e,this._truthy._parent=this,this._containers.truthy.appendChild(e._DOMNode),e._clearComponentAbsoluteCoordinates(),this._resize({truthyHeight:e._getFittingHeight()}),e.addResizeListener(this._truthyResizeHandlerBinded),this._updateMovementEventListeners();var i=parseInt(e._DOMNode.style.getPropertyValue("z-index"),10);return this._propagateZIndexToAncestorsIfGreater(i),!0}},{key:"removeTruthy",value:function(){return!!this._truthy&&(this._containers.truthy.children.length&&this._containers.truthy.removeChild(this._containers.truthy.children[0]),this._truthy.removeResizeListener(this._truthyResizeHandlerBinded),this._truthy._parent=null,this._truthy=null,delete this._dimensions.truthyHeight,this._resize(),this._updateMovementEventListeners(),!0)}},{key:"addFalsy",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no-replace";if(!(e instanceof t)||!this._addElements.falsy||e._isDescendantOrTheSameComponent(this))return!1;if(this._falsy&&"no-replace"===n)return!1;if(this._falsy&&"last"===n)return this._falsy.addNext(e,"last");if(this._falsy&&"first"===n&&!e.addNext(this._falsy,"last"))return!1;e._parent&&e._parent.removeChild(e),this.removeFalsy(),this._falsy=e,this._falsy._parent=this,this._containers.falsy.appendChild(e._DOMNode),e._clearComponentAbsoluteCoordinates(),this._resize({falsyHeight:e._getFittingHeight()}),e.addResizeListener(this._falsyResizeHandlerBinded),this._updateMovementEventListeners();var i=parseInt(e._DOMNode.style.getPropertyValue("z-index"),10);return this._propagateZIndexToAncestorsIfGreater(i),!0}},{key:"removeFalsy",value:function(){return!!this._falsy&&(this._containers.falsy.children.length&&this._containers.falsy.removeChild(this._containers.falsy.children[0]),this._falsy.removeResizeListener(this._falsyResizeHandlerBinded),this._falsy._parent=null,this._falsy=null,delete this._dimensions.falsyHeight,this._resize(),this._updateMovementEventListeners(),!0)}},{key:"addNext",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no-replace";if(!(e instanceof t)||!this._addElements.next||e._isDescendantOrTheSameComponent(this)||!e._addElements.previous)return!1;if(this._next&&"no-replace"===n)return!1;if(this._next&&"last"===n)return this._next.addNext(e,"last");if(this._next&&"first"===n&&!e.addNext(this._next,"last"))return!1;e._parent&&e._parent.removeChild(e),this.removeNext(),this._next=e,this._next._parent=this,this._containers.next.appendChild(e._DOMNode),e._clearComponentAbsoluteCoordinates(),this._resize({nextHeight:e._getFittingHeight()}),e.addResizeListener(this._nextResizeHandlerBinded),this._updateMovementEventListeners();var i=parseInt(e._DOMNode.style.getPropertyValue("z-index"),10);return this._propagateZIndexToAncestorsIfGreater(i),!0}},{key:"removeNext",value:function(){return!!this._next&&(this._containers.next.children.length&&this._containers.next.removeChild(this._containers.next.children[0]),this._next.removeResizeListener(this._nextResizeHandlerBinded),this._next._parent=null,this._next=null,this._resize({nextHeight:0}),this._updateMovementEventListeners(),!0)}},{key:"removeChild",value:function(t){return t===this._truthy?this.removeTruthy(t):t===this._falsy?this.removeFalsy(t):t===this._next&&this.removeNext(t)}},{key:"addResizeListener",value:function(t){for(var e=0,n=this._resizeListeners.length;e<n;e+=1)if(this._resizeListeners[e]===t)return;this._resizeListeners.push(t)}},{key:"removeResizeListener",value:function(t){for(var e=this._resizeListeners.length-1;e>=0;e-=1)if(this._resizeListeners[e]===t){this._resizeListeners.splice(e,1);break}}},{key:"getDOMNode",value:function(){return this._DOMNode}},{key:"getDimensions",value:function(){return{width:this._dimensions.width,height:this._dimensions.height}}},{key:"getShapeName",value:function(){return this._shapeName}},{key:"getChildren",value:function(){return{truthy:this._truthy,falsy:this._falsy,next:this._next}}},{key:"getParent",value:function(){return this._parent}},{key:"getHitContainer",value:function(){var t=this._DOMNode.getBoundingClientRect(),e=t.top;return{top:e,bottom:e+10,right:t.right,left:t.left}}},{key:"getContainerCoincidences",value:function(t){var e=this._getContainerPositions(),n=e.truthy,i=e.falsy,o=e.next,s={};return s.truthy=x.isContainerCoincident(t,n),s.falsy=x.isContainerCoincident(t,i),s.next=x.isContainerCoincident(t,o),s}},{key:"_getContainerPositions",value:function(){return{truthy:this._containers.truthy?this._containers.truthy.getBoundingClientRect():null,falsy:this._containers.falsy?this._containers.falsy.getBoundingClientRect():null,next:this._containers.next?this._containers.next.getBoundingClientRect():null}}},{key:"_adjustAllIndexesAndMadeThisOnTheTop",value:function(){var t=this._getAllComponentIndexesAndMakeThisOnTheTop();t.sort((function(t,e){return t.index-e.index})),t.forEach((function(t,e){return t.instance._DOMNode.style.setProperty("z-index",e+2)}));var e=parseInt(this._DOMNode.style.getPropertyValue("z-index"),10)+1;this._DOMNode.style.setProperty("z-index",e),this._propagateZIndexToAncestorsIfGreater(e)}},{key:"_propagateZIndexToAncestorsIfGreater",value:function(t){var e=parseInt(this._DOMNode.style.getPropertyValue("z-index"),10);e&&e>t||(this._DOMNode.style.setProperty("z-index",t),this._parent&&this._parent._propagateZIndexToAncestorsIfGreater(t))}},{key:"_getAllComponentIndexesAndMakeThisOnTheTop",value:function(){return this._DOMNode.style.setProperty("z-index",1e3),b.map((function(t){return{index:t._DOMNode.style.zIndex||0,instance:t}}))}},{key:"_getDeepestNextPreviewChild",value:function(){return this._next&&this._next._opt.isPreview?this._next._getDeepestNextPreviewChild():this}},{key:"setPermissions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.merge(this._addElements,t),this._addElements.truthy||this.removeTruthy(),this._addElements.falsy||this.removeFalsy(),this._addElements.next||this.removeNext()}}])&&N(e.prototype,n),i&&N(e,i),t}(),W=n(0);function M(t){t.preventDefault()}document.body.addEventListener("touchstart",M,{passive:!1}),document.body.addEventListener("touchend",M,{passive:!1}),document.body.addEventListener("touchmove",M,{passive:!1});var T=new H("event",{attributes:{class:"event",style:{left:"20px",top:"20px"}}}),D=new H("function",{attributes:{class:"function",style:{left:"180px",top:"20px"}}}),P=new H("truthyFalsyBlock",{attributes:{class:"truthyFalsyBlock",style:{left:"20px",top:"90px"}}}),z=new H("truthyBlock",{attributes:{class:"truthyBlock",style:{left:"180px",top:"90px"}},fitting:{next:!1}}),R=new H(z,{attributes:{style:{left:"20px",top:"260px"}},fitting:{next:!0}}),A=new H("statement",{attributes:{class:"statement",style:{left:"180px",top:"200px"}}}),E=new H(A,{attributes:{style:{top:"260px"}},fitting:{next:!1}});y.isTouch()?document.body.innerHTML='<div class="build-container"><span class="build">Build date</span>'+'<span class="date">'.concat(W.a,"</span></div>"):console.log("Build date",W.a),document.body.appendChild(A.getDOMNode()),document.body.appendChild(E.getDOMNode()),document.body.appendChild(T.getDOMNode()),document.body.appendChild(D.getDOMNode()),document.body.appendChild(z.getDOMNode()),document.body.appendChild(R.getDOMNode()),document.body.appendChild(P.getDOMNode())}]);