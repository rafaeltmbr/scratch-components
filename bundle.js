!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"a":"Fri, 14 Feb 2020 00:51:43 GMT"}')},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var o=!0,r=!0,s=!0,a=20,h=20,d=8,c=100,l=20,u=1,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,p;return t=e,p=[{key:"truthyBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.getFormmatedOptions(t,n),o="M ".concat(i.strokeWidth/2,",").concat(4+i.strokeWidth/2),r="a 4 4 0 0 1 4,-4",s="a 4 4 0 0 0 -4,4",a="a 4 4 0 0 0 4,4",h="a 4 4 0 0 1 4,4",d="a 4 4 0 0 1 -4,4",c="a 4 4 0 0 1 -4,-4",l="v".concat(i.truthyHeight-8),u="h 8",p="h -8",v="v 24",_="v".concat(i.lineHeight+i.strokeWidth),y="h".concat(64-i.totalWidth+i.strokeWidth),f="h".concat(i.totalWidth-64-i.strokeWidth),m="h".concat(i.totalWidth-52-i.strokeWidth),g="h".concat(52-i.totalWidth+i.strokeWidth),C="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",k="h 36",x="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",b="h -36",w="z",N=o+r+u+C+m+h+_+d+y+x+p+s+l+a+u+(i.truthy?C:k)+f+h+v+d+g+(i.next?x:b)+p+c+w,H=i.totalWidth,M=i.truthyHeight+i.lineHeight+2*i.strokeWidth+(i.next?48:40);return{path:N,dimensions:{width:"".concat(H,"px"),height:"".concat(M,"px"),"stroke-width":"".concat(i.strokeWidth,"px"),fittingHeight:M-(i.next?8:0)-i.strokeWidth,description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+8,left:i.strokeWidth},truthy:{width:i.totalWidth-12,height:i.truthyHeight+i.strokeWidth,top:i.lineHeight+8+i.strokeWidth,left:12},next:i.next?{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:M-(i.next?8:0)-i.strokeWidth,left:0}:void 0}}}},{key:"truthyFalsyBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.getFormmatedOptions(t,n),o="M ".concat(i.strokeWidth/2,",").concat(4+i.strokeWidth/2),r="a 4 4 0 0 1 4,-4",s="a 4 4 0 0 0 -4,4",a="a 4 4 0 0 0 4,4",h="a 4 4 0 0 1 4,4",d="a 4 4 0 0 1 -4,4",c="a 4 4 0 0 1 -4,-4",l="v".concat(i.truthyHeight-8),u="v".concat(i.falsyHeight-8),p="h 8",v="h -8",_="v 24",y="v".concat(i.lineHeight+i.strokeWidth),f="h".concat(64-i.totalWidth+i.strokeWidth),m="h".concat(i.totalWidth-64-i.strokeWidth),g="h".concat(i.totalWidth-52-i.strokeWidth),C="h".concat(52-i.totalWidth+i.strokeWidth),k="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",x="h 36",b="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",w="z",N=o+r+p+k+g+h+y+d+f+b+v+s+l+a+p+(i.truthy?k:x)+m+h+_+d+f+b+v+s+u+a+p+(i.falsy?k:x)+m+h+_+d+C+b+v+c+w,H=i.totalWidth,M=i.truthyHeight+i.falsyHeight+i.lineHeight+2*i.strokeWidth+80;return{path:N,dimensions:{width:"".concat(H,"px"),height:"".concat(M,"px"),fittingHeight:M-8-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+8,left:i.strokeWidth},truthy:{width:i.totalWidth-12,height:i.truthyHeight+i.strokeWidth,top:i.lineHeight+8+i.strokeWidth,left:12},falsy:{width:i.totalWidth-12,height:i.falsyHeight+i.strokeWidth,top:i.lineHeight+8+i.truthyHeight+i.strokeWidth+32,left:12},next:{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:M-8-i.strokeWidth,left:0}}}}},{key:"statement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.getFormmatedOptions(t,n),o="M ".concat(i.strokeWidth/2,",").concat(4+i.strokeWidth/2),r="a 4 4 0 0 1 4,-4",s="a 4 4 0 0 1 4,4",a="a 4 4 0 0 1 -4,4",h="a 4 4 0 0 1 -4,-4",d="h 8",c="h -8",l="v".concat(i.lineHeight+i.strokeWidth),u="h".concat(i.totalWidth-52-i.strokeWidth),p="h".concat(52-i.totalWidth+i.strokeWidth),v="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",_="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",y="h -36",f="z",m=o+r+d+v+u+s+l+a+p+(i.next?_:y)+c+h+f,g=i.totalWidth,C=i.lineHeight+2*i.strokeWidth+(i.next?16:8);return{path:m,dimensions:{width:"".concat(g,"px"),height:"".concat(C,"px"),fittingHeight:C-(i.next?8:0)-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+8,left:i.strokeWidth},next:i.next?{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:C-(i.next?8:0)-i.strokeWidth,left:0}:void 0}}}},{key:"event",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.getFormmatedOptions(t,n),o="M ".concat(i.strokeWidth/2,",").concat(17+i.strokeWidth/2),r="c 25,-22 71,-22 96,0",s="a 4 4 0 0 1 4,4",a="a 4 4 0 0 1 -4,4",h="a 4 4 0 0 1 -4,-4",d="h -8",c="v".concat(i.lineHeight-4),l="h".concat(i.totalWidth-100-i.strokeWidth),u="h".concat(52-i.totalWidth+i.strokeWidth),p="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",v="z",_=o+r+l+s+c+a+u+p+d+h+v,y=i.totalWidth,f=i.lineHeight+29+i.strokeWidth;return{path:_,dimensions:{width:"".concat(y,"px"),height:"".concat(f,"px"),fittingHeight:f-8-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+20,left:i.strokeWidth},next:{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:f-8-i.strokeWidth,left:0}}}}},{key:"function",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.getFormmatedOptions(t,n),o="M ".concat(i.strokeWidth/2,",").concat(20+i.strokeWidth/2),r="a 20 20 0 0 1 20,-20",s="a 20 20 0 0 1 20,20",a="a 4 4 0 0 1 -4,4",h="a 4 4 0 0 1 -4,-4",d="h -8",c="v".concat(i.lineHeight-6),l="h".concat(i.totalWidth-40-i.strokeWidth),u="h".concat(52-i.totalWidth+i.strokeWidth),p="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h-12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",v="z",_=o+r+l+s+c+a+u+p+d+h+v,y=i.totalWidth,f=i.lineHeight+i.strokeWidth+26;return{path:_,dimensions:{width:"".concat(y,"px"),height:"".concat(f,"px"),fittingHeight:f-8-i.strokeWidth,"stroke-width":"".concat(i.strokeWidth,"px"),description:{width:i.totalWidth-2*i.strokeWidth,height:i.lineHeight,top:i.strokeWidth+17,left:i.strokeWidth},next:{width:i.totalWidth,height:i.nextHeight+i.strokeWidth,top:f-8-i.strokeWidth,left:0}}}}},{key:"getFormmatedOptions",value:function(e,t){var n=t.fitting||{},i=t.attributes||{};return{nextHeight:e.nextHeight||d,totalWidth:parseInt(i.style.width,10)||c,lineHeight:parseInt(i.style["line-height"],10)||l,strokeWidth:parseInt(i.style["stroke-width"],10)||u,truthyHeight:e.truthyHeight||a,falsyHeight:e.falsyHeight||h,next:void 0===n.next?s:n.next,truthy:void 0===n.truthy?o:n.truthy,falsy:void 0===n.falsy?r:n.falsy}}}],(n=null)&&i(t.prototype,n),p&&i(t,p),e}();function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createNodeElement",value:function(e){var t=document.createElement("div");return t.innerHTML=e,1===t.children.length?t.children[0]:t.children}},{key:"isTouch",value:function(){var e=" -webkit- -moz- -o- -ms- ".split(" "),t=window.matchMedia?function(e){return window.matchMedia(e).matches}:void 0;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var n=["(",e.join("touch-enabled),("),"heartz",")"].join("");return!!t&&t(n)}}],(n=null)&&v(t.prototype,n),i&&v(t,i),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"deepCopy",value:function(t,n){Object.keys(n).forEach((function(i){e.isArray(n[i])?t[i]=n[i].map((function(e){return e})):e.isObject(n[i])?e.deepCopy(t[i]={},n[i]):t[i]=n[i]}))}},{key:"merge",value:function(t,n){Object.keys(n).forEach((function(i){e.isObject(n[i])?(e.isObject(t[i])||(t[i]={}),e.merge(t[i],n[i])):t[i]=n[i]}))}},{key:"toArray",value:function(e){return e?Object.keys(e).map((function(t){return e[t]})):e}},{key:"deepClone",value:function(t){var n={};return e.deepCopy(n,t),n}},{key:"isObject",value:function(e){return null!==e&&"object"===y(e)&&!Array.isArray(e)}},{key:"isArray",value:function(e){return Array.isArray(e)&&"object"===y(e)}},{key:"hasTheSamePropertiesAndValues",value:function(t,n){if("object"!==y(t)||"object"!==y(n)||!t||!n)return t===n;var i=e.toArray(t),o=e.toArray(n);if(i.length!==o.length)return!1;var r=i.map((function(t,n){return e.hasTheSamePropertiesAndValues(t,o[n])}));return!r||!r.length||r.reduce((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t&&e}))}}],(n=null)&&f(t.prototype,n),i&&f(t,i),e}();function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"isContainerCoincident",value:function(t,n){return!(!t||!n)&&e.isHorizontalCoincident(t,n)&&e.isVerticalCoincident(t,n)}},{key:"isHorizontalCoincident",value:function(t,n){var i={start1:t.left,end1:t.right,start2:n.left,end2:n.right};return e.isLineCoincident(i)}},{key:"isVerticalCoincident",value:function(t,n){var i={start1:t.top,end1:t.bottom,start2:n.top,end2:n.bottom};return e.isLineCoincident(i)}},{key:"isLineCoincident",value:function(e){var t=e.start1,n=e.start2,i=e.end1,o=e.end2;return t<=n&&i>=n||t<=o&&i>=o||n<=t&&i<=o}},{key:"isValidShapeName",value:function(e){return"string"==typeof e&&"function"==typeof p[e]}},{key:"createComponentHTML",value:function(t,n,i){var o=m.deepClone(i.attributes);m.merge(o.style,n);var r=e.createStringOfAttributes(o.style,": ","; "),s=e.createStringOfAttributes(o,'="','" ','"'),a=e.createContainers(n);return"<div ".concat(s,' style="').concat(r,'">')+'<svg style="width: 100%; height: 100%">'+'<path d="'.concat(t,'" /></svg>')+"".concat(a,"</div></div>")}},{key:"createContainers",value:function(t){return e.createContainerHTML("scratch-previous-container",{height:1,width:t.width})+e.createContainerHTML("scratch-description-container",t.description)+e.createContainerHTML("scratch-truthy-container",t.truthy)+e.createContainerHTML("scratch-falsy-container",t.falsy)+(t.next?'<div class="scratch-next-container" '+'style="width: 100%; height: '.concat(t.next.height,"px; ")+"top: ".concat(t.fittingHeight,"px; ")+'left: 0px; position: absolute;">':"")}},{key:"createContainerHTML",value:function(e,t){return t?'<div class="'.concat(e||"",'" style="position: absolute; ')+"width: ".concat(t.width||0,"px; ")+"height: ".concat(t.height||0,"px; ")+"top: ".concat(t.top||0,"px; ")+"left: ".concat(t.left||0,'px"></div>'):""}},{key:"createStringOfAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object.keys(e).map((function(n){return"string"==typeof e[n]?"".concat(n+t+e[n]):""})).filter((function(e){return""!==e})).join(n)+i}},{key:"updateContainerDimensions",value:function(e,t,n){e.style.setProperty("top","".concat(n.top,"px"))}},{key:"getContainerTopLeftOffset",value:function(e){return{top:parseInt(e.style.top,10)||0,left:parseInt(e.style.left,10)||0}}}],(n=null)&&g(t.prototype,n),i&&g(t,i),e}(),k={attributes:{class:"",id:"",style:{position:"absolute",width:"120px","stroke-width":"1px","line-height":"24px"}},fitting:{truthy:!0,falsy:!0,next:!0},propagateClassNameToNestedElements:!1,isPreview:!1};function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var w=[],N=_.isTouch(),H={},M=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(this,e),C.isValidShapeName(t))this._shapeNameConstructor(t,n);else{if(!(t instanceof e))throw new Error("Invalid shapeNameOrComponentInstance");this._componentInstanceConstructor(t,n)}this._opt.isPreview||(w.push(this),this._id=w.length)}var t,n,i;return t=e,i=[{key:"removeAnyPreviewContainer",value:function(){e.removePreviewContainer(),e.removeReversePreviewContainer()}},{key:"removePreviewContainer",value:function(){if(H.removeMethod){var e=H.component._parent,t=H.component._getDeepestNextPreviewChild()._children;H.removeMethod(H.component),H.removeMethod=null,t&&t.next&&e[H.addMethodName](t.next,!0)}}},{key:"removeReversePreviewContainer",value:function(){var e=H.nextChild;if(H.nextChild){var t=e._DOMNode.getBoundingClientRect(),n=t.top,i=t.left;e._DOMNode.style.setProperty("top","".concat(n,"px")),e._DOMNode.style.setProperty("left","".concat(i,"px")),e._parent.removeNext(e),document.body.appendChild(e._DOMNode),e._parent=null,document.body.removeChild(H.component._DOMNode),H.nextChild=null}}},{key:"adjustPreviewPosition",value:function(e,t){var n=t.top-e.top,i=t.left-e.left,o=C.getContainerTopLeftOffset(H.component._DOMNode),r={top:o.top-n,left:o.left-i};H.component._DOMNode.style.setProperty("top","".concat(r.top,"px")),H.component._DOMNode.style.setProperty("left","".concat(r.left,"px"))}}],(n=[{key:"_shapeNameConstructor",value:function(e,t){this._initializeProperties(e),this._assingOptions(t),this._createDOMNode(e),this._createNodeShortcuts(),this._assignCoincidenceHandlers(),this._allowElementToBeCoincidentWithOthers(),this._assignMovementHandler()}},{key:"_componentInstanceConstructor",value:function(e,t){this._initializeProperties(e._shapeName),this._copyAndAssignOptionsFromComponent(e,t),this._createDOMNode(this._shapeName),this._createNodeShortcuts(),this._allowElementToBeCoincidentWithOthers(),this._createNestedComponents(e),this._assignCoincidenceHandlers(),this._assignMovementHandler()}},{key:"_initializeProperties",value:function(e){this._shapeName=e,this._DOMNode=null,this._path=null,this._children={},this._parent=null,this._id=0,this._opt={},this._containers={},this._dimensions={},this._addElements={},this._lastCoincidence={},this._lastReverseCoincidence={},this._resizeListeners=[],this._handleContainerCoincidence={},this._movementCoordinates={},this._truthyResizeHandler=this._truthyResizeHandler.bind(this),this._falsyResizeHandler=this._falsyResizeHandler.bind(this),this._nextResizeHandler=this._nextResizeHandler.bind(this),this._movementHandler=this._movementHandler.bind(this),this._handleMovement=this._handleMovement.bind(this),this._removeMovementHandler=this._removeMovementHandler.bind(this)}},{key:"_assingOptions",value:function(e){m.merge(this._opt,k),m.merge(this._opt,e)}},{key:"_copyAndAssignOptionsFromComponent",value:function(e,t){m.deepCopy(this._opt,e._opt),m.merge(this._opt,t)}},{key:"_createDOMNode",value:function(e){var t=p[e](this._dimensions,this._opt),n=t.path,i=t.dimensions,o=C.createComponentHTML(n,i,this._opt);this._DOMNode=_.createNodeElement(o),m.merge(this._dimensions,i)}},{key:"_createNodeShortcuts",value:function(){var e=this._DOMNode.children,t=e.length;this._path=e[0].children[0],this._containers.description=e[2],t>3&&(this._containers.truthy=e[3].className.includes("truthy")?e[3]:null),t>4&&(this._containers.falsy=e[4].className.includes("falsy")?e[4]:null),this._containers.next=e[t-1].className.includes("next")?e[t-1]:null}},{key:"_assignCoincidenceHandlers",value:function(){this._handleContainerCoincidence={truthy:this._truthyCoincidenceHandler.bind(this),falsy:this._falsyCoincidenceHandler.bind(this),next:this._nextCoincidenceHandler.bind(this)}}},{key:"_allowElementToBeCoincidentWithOthers",value:function(){this._addElements={truthy:this._containers.truthy,falsy:this._containers.falsy,next:this._containers.next,previous:"function"!==this._shapeName&&"event"!==this._shapeName}}},{key:"_assignMovementHandler",value:function(){var e=N?"touchstart":"mousedown";this._path.addEventListener(e,this._movementHandler),this._containers.description.addEventListener(e,this._movementHandler),this._updateMovementEventListeners()}},{key:"_handleReverseNextContainerCoincidence",value:function(t){if(!H.component._isDescendantOrTheSameComponent(t)){e.removeAnyPreviewContainer();var n=t._DOMNode.getBoundingClientRect();if(!t._parent&&H.component.addNext(t,"last")){document.body.appendChild(H.component._DOMNode),H.nextChild=t;var i=t._DOMNode.getBoundingClientRect();e.adjustPreviewPosition(n,i),this._adjustAllIndexesAndMadeThisOnTheTop()}}}},{key:"_createNestedComponents",value:function(t){var n={attributes:{class:this._opt.propagateClassNameToNestedElements?this._opt.attributes.class:""},isPreview:this._opt.isPreview};t._children.truthy&&this.addTruthy(new e(t._children.truthy,n)),t._children.falsy&&this.addFalsy(new e(t._children.falsy,n)),t._children.next&&this.addNext(new e(t._children.next,n))}},{key:"_truthyCoincidenceHandler",value:function(t){t._children.truthy!==H.component&&(e.removeAnyPreviewContainer(),t._children.truthy&&!H.component.addNext(t._children.truthy,"last")||(t.addTruthy(H.component),H.removeMethod=t.removeTruthy.bind(t),H.addMethodName="addTruthy",this._adjustAllIndexesAndMadeThisOnTheTop()))}},{key:"_falsyCoincidenceHandler",value:function(t){t._children.falsy!==H.component&&(e.removeAnyPreviewContainer(),t._children.falsy&&!H.component.addNext(t._children.falsy,"last")||(t.addFalsy(H.component),H.removeMethod=t.removeFalsy.bind(t),H.addMethodName="addFalsy",this._adjustAllIndexesAndMadeThisOnTheTop()))}},{key:"_nextCoincidenceHandler",value:function(t){t._children.next!==H.component&&(e.removeAnyPreviewContainer(),t._children.next&&!H.component.addNext(t._children.next,"last")||(t.addNext(H.component),H.removeMethod=t.removeNext.bind(t),H.addMethodName="addNext",this._adjustAllIndexesAndMadeThisOnTheTop()))}},{key:"_adjustAllIndexesAndMadeThisOnTheTop",value:function(){var e=this._getAllComponentIndexesAndMakeThisOnTheTop();e.sort((function(e,t){return e.index-t.index})),e.forEach((function(e,t){return e.instance._DOMNode.style.setProperty("z-index",t+2)}));var t=parseInt(this._DOMNode.style.getPropertyValue("z-index"),10)+1;this._DOMNode.style.setProperty("z-index",t),this._propagateZIndexToAncestorsIfGreater(t)}},{key:"_getAllComponentIndexesAndMakeThisOnTheTop",value:function(){return this._DOMNode.style.setProperty("z-index",1e3),w.map((function(e){return{index:e._DOMNode.style.zIndex||0,instance:e}}))}},{key:"_propagateZIndexToAncestorsIfGreater",value:function(e){var t=parseInt(this._DOMNode.style.getPropertyValue("z-index"),10);t&&t>e||(this._DOMNode.style.setProperty("z-index",e),this._parent&&this._parent._propagateZIndexToAncestorsIfGreater(e))}},{key:"_updateMovementEventListeners",value:function(){if(N){var e=this._containers,t=e.truthy,n=e.falsy;t&&(this._children.truthy?t.removeEventListener("touchstart",this._movementHandler):t.addEventListener("touchstart",this._movementHandler)),n&&(this._children.falsy?n.removeEventListener("touchstart",this._movementHandler):n.addEventListener("touchstart",this._movementHandler))}}},{key:"_isDescendantOrTheSameComponent",value:function(e){return e===this||this._children.truthy===e||this._children.falsy===e||this._children.next===e||!(!this._children.truthy||!this._children.truthy._isDescendantOrTheSameComponent(e))||!(!this._children.falsy||!this._children.falsy._isDescendantOrTheSameComponent(e))||!(!this._children.next||!this._children.next._isDescendantOrTheSameComponent(e))}},{key:"_getDeepestNextPreviewChild",value:function(){return this._children.next&&this._children.next._opt.isPreview?this._children.next._getDeepestNextPreviewChild():this}},{key:"_movementHandler",value:function(e){this._updateMovementCoordinates(e),this._DOMNode.setAttribute("data-grabbing",!0),this._adjustAllIndexesAndMadeThisOnTheTop(),this._createPreviewComponent(),window.addEventListener(N?"touchmove":"mousemove",this._handleMovement),window.addEventListener(N?"touchend":"mouseup",this._removeMovementHandler)}},{key:"_updateMovementCoordinates",value:function(e){var t=e.touches?e.touches[0]:e,n=t.clientX,i=t.clientY;this._movementCoordinates.startX=n,this._movementCoordinates.startY=i;var o=this._DOMNode.getBoundingClientRect(),r=o.top,s=o.left;this._movementCoordinates.initialX=s,this._movementCoordinates.initialY=r}},{key:"_createPreviewComponent",value:function(){var t=parseInt(this._DOMNode.style.zIndex,10)-1;H.component=new e(this,{attributes:{class:"shadow",style:{top:"0px",left:"0px","z-index":"".concat(t)}},propagateClassNameToNestedElements:!0,isPreview:!0})}},{key:"_handleMovement",value:function(e){var t=e.touches?e.touches[0]:e,n=t.clientX,i=t.clientY;this._DOMNode.parentElement!==document.body&&(document.body.appendChild(this._DOMNode),this._parent.removeChild(this));var o=n-this._movementCoordinates.startX,r=i-this._movementCoordinates.startY;this._DOMNode.style.setProperty("left","".concat(o+this._movementCoordinates.initialX,"px")),this._DOMNode.style.setProperty("top","".concat(r+this._movementCoordinates.initialY,"px")),this._checkForCoincidence()}},{key:"_removeMovementHandler",value:function(){window.removeEventListener(N?"touchmove":"mousemove",this._handleMovement),window.removeEventListener(N?"touchend":"mouseup",this._removeMovementHandler),this._DOMNode.setAttribute("data-grabbing",!1),this._finishPreviewComponent()}},{key:"_checkForCoincidence",value:function(){this._lastCoincidence.found=this._getAndHandleCoincidentComponent(),this._lastCoincidence.found||(this._checkForReverseCoincidence(),H.component&&e.removePreviewContainer())}},{key:"_finishPreviewComponent",value:function(){this._lastCoincidence.found?this._handleCoincidentComponent():this._lastReverseCoincidence.found&&this._handleReverseCoincidentComponent(),H.component=null,H.removeMethod=null,H.addMethodName="",H.nextChild=null}},{key:"_getAndHandleCoincidentComponent",value:function(){for(var e=this._getHitContainer(),t=0;t<w.length;t+=1)if(this._addElements.previous&&this._handleComponentCoincidence(w[t],e))return w[t];return null}},{key:"_checkForReverseCoincidence",value:function(){return this._lastReverseCoincidence.found=this._getAndHandleReverseCoincidentComponent(),this._lastReverseCoincidence.found?this._lastReverseCoincidence.found:(e.removeReversePreviewContainer(),this._children.next&&(this._lastReverseCoincidence.found=this._children.next._checkForReverseCoincidence()),this._lastReverseCoincidence.found)}},{key:"_handleCoincidentComponent",value:function(){var t=this._lastCoincidence.containerName;"truthy"===t?(e.removePreviewContainer(),this._lastCoincidence.found.addTruthy(this,"first")):"falsy"===t?(e.removePreviewContainer(),this._lastCoincidence.found.addFalsy(this,"first")):"next"===t&&(e.removePreviewContainer(),this._lastCoincidence.found.addNext(this,"first"))}},{key:"_handleReverseCoincidentComponent",value:function(){var t=H.component._DOMNode.getBoundingClientRect(),n=t.top,i=t.left;this._DOMNode.style.setProperty("top","".concat(n,"px")),this._DOMNode.style.setProperty("left","".concat(i,"px")),e.removeReversePreviewContainer(),this.addNext(this._lastReverseCoincidence.found,"last")}},{key:"_getHitContainer",value:function(){var e=this._DOMNode.getBoundingClientRect(),t=e.top;return{top:t,bottom:t+10,right:e.right,left:e.left}}},{key:"_handleComponentCoincidence",value:function(e,t){if(this._isDescendantOrTheSameComponent(e)||e._opt.isPreview)return!1;var n=e._getContainerCoincidences(t),i=Object.keys(n).find((function(e){return n[e]}));return!!i&&(this._handleContainerCoincidence[i](e),this._lastCoincidence.containerName=i,!0)}},{key:"_getAndHandleReverseCoincidentComponent",value:function(){for(var e=0;e<w.length;e+=1)if(w[e]._addElements.previous&&this._handleReverseComponentCoincidence(w[e]))return w[e];return null}},{key:"_getContainerCoincidences",value:function(e){var t=this._getContainerPositions(),n=t.truthy,i=t.falsy,o=t.next,r={};return r.truthy=C.isContainerCoincident(e,n),r.falsy=C.isContainerCoincident(e,i),r.next=C.isContainerCoincident(e,o),r}},{key:"_handleReverseComponentCoincidence",value:function(e){return!(this._isDescendantOrTheSameComponent(e)||e._opt.isPreview||e._parent&&!e._parent._opt.isPreview||e===this._parent||!this._getContainerCoincidences(e._getHitContainer()).next||this._children.next||(this._handleReverseNextContainerCoincidence(e),this._lastReverseCoincidence.containerName="next",0))}},{key:"_getContainerPositions",value:function(){return{truthy:this._containers.truthy?this._containers.truthy.getBoundingClientRect():null,falsy:this._containers.falsy?this._containers.falsy.getBoundingClientRect():null,next:this._containers.next?this._containers.next.getBoundingClientRect():null}}},{key:"_clearComponentAbsoluteCoordinates",value:function(){this._DOMNode.style.setProperty("top","0px"),this._DOMNode.style.setProperty("left","0px")}},{key:"_truthyResizeHandler",value:function(t){t instanceof e&&this._resize({truthyHeight:t._getFittingHeight()})}},{key:"_falsyResizeHandler",value:function(t){t instanceof e&&this._resize({falsyHeight:t._getFittingHeight()})}},{key:"_nextResizeHandler",value:function(t){t instanceof e&&this._resize({nextHeight:t._getFittingHeight()})}},{key:"_getFittingHeight",value:function(){return this._dimensions.fittingHeight+(this._children.next?this._children.next._getFittingHeight():0)}},{key:"_resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.merge(this._dimensions,e),this._updateFittingVisibility();var t=p[this._shapeName](this._dimensions,this._opt),n=t.path,i=t.dimensions;this._DOMNode.style.setProperty("width",i.width),this._DOMNode.style.setProperty("height",i.height),this._path.setAttribute("d",n),this._updateContainerDimensions(i),m.merge(this._dimensions,i),this._callResizeListeners()}},{key:"_updateFittingVisibility",value:function(){this._opt.fitting.truthy=!this._children.truthy||this._children.truthy._getNextFitting(),this._opt.fitting.falsy=!this._children.falsy||this._children.falsy._getNextFitting()}},{key:"_updateContainerDimensions",value:function(e){var t=e.truthy,n=e.falsy,i=e.next;this._containers.truthy&&t&&C.updateContainerDimensions(this._containers.truthy,i,t),this._containers.falsy&&n&&C.updateContainerDimensions(this._containers.falsy,i,n),this._containers.next&&this._containers.next.style.setProperty("top","".concat(e.fittingHeight,"px"))}},{key:"_callResizeListeners",value:function(){var e=this;this._resizeListeners.forEach((function(t){return t(e)}))}},{key:"_getNextFitting",value:function(){return this._children.next?this._children.next._getNextFitting():this._opt.fitting.next}},{key:"_addComponent",value:function(e,t,n){var i=this._children[t];return(!i||"no-replace"!==n)&&(i&&"last"===n?i.addNext(e,"last"):!(i&&"first"===n&&!e.addNext(i,"last")||(this._addChild(e,t),0)))}},{key:"_addChild",value:function(e,t){e._parent&&e._parent.removeChild(e),this["remove".concat(t.charAt(0).toUpperCase()).concat(t.slice(1))](),this._children[t]=e,this._children[t]._parent=this,this._containers[t].appendChild(e._DOMNode),e._clearComponentAbsoluteCoordinates(),this._setupAfterAddChild(e,t)}},{key:"_setupAfterAddChild",value:function(e,t){var n={};n["".concat(t,"Height")]=e._getFittingHeight(),this._resize(n),e.addResizeListener(this["_".concat(t,"ResizeHandler")]),this._updateMovementEventListeners();var i=parseInt(e._DOMNode.style.getPropertyValue("z-index"),10);this._propagateZIndexToAncestorsIfGreater(i)}},{key:"_removeComponent",value:function(e){var t=this._children[e];if(t){var n=this._containers[e];return n.children.length&&n.removeChild(n.children[0]),this._setupAfterRemoveChild(t,e),!0}return!1}},{key:"_setupAfterRemoveChild",value:function(e,t){e.removeResizeListener(this["_".concat(t,"ResizeHandler")]),e._parent=null,this._children[t]=null,delete this._dimensions["".concat(t,"Height")],this._resize(),this._updateMovementEventListeners()}},{key:"addTruthy",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no-replace";return!(!(t instanceof e&&this._addElements.truthy)||t._isDescendantOrTheSameComponent(this))&&this._addComponent(t,"truthy",n)}},{key:"removeTruthy",value:function(){return this._removeComponent("truthy")}},{key:"addFalsy",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no-replace";return!(!(t instanceof e&&this._addElements.falsy)||t._isDescendantOrTheSameComponent(this))&&this._addComponent(t,"falsy",n)}},{key:"removeFalsy",value:function(){return this._removeComponent("falsy")}},{key:"addNext",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no-replace";return!!(t instanceof e&&this._addElements.next&&!t._isDescendantOrTheSameComponent(this)&&t._addElements.previous)&&this._addComponent(t,"next",n)}},{key:"removeNext",value:function(){return this._removeComponent("next")}},{key:"removeChild",value:function(e){return e===this._children.truthy?this.removeTruthy(e):e===this._children.falsy?this.removeFalsy(e):e===this._children.next&&this.removeNext(e)}},{key:"addResizeListener",value:function(e){for(var t=0,n=this._resizeListeners.length;t<n;t+=1)if(this._resizeListeners[t]===e)return;this._resizeListeners.push(e)}},{key:"removeResizeListener",value:function(e){for(var t=this._resizeListeners.length-1;t>=0;t-=1)if(this._resizeListeners[t]===e){this._resizeListeners.splice(t,1);break}}},{key:"getDOMNode",value:function(){return this._DOMNode}},{key:"getDimensions",value:function(){return{width:this._dimensions.width,height:this._dimensions.height}}},{key:"getShapeName",value:function(){return this._shapeName}},{key:"getChildren",value:function(){return{truthy:this._children.truthy||null,falsy:this._children.falsy||null,next:this._children.next||null}}},{key:"getParent",value:function(){return this._parent}},{key:"getPermissions",value:function(){return{truthy:this._addElements.truthy,falsy:this._addElements.falsy,next:this._addElements.next}}},{key:"setPermissions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.merge(this._addElements,e),this._addElements.truthy||this.removeTruthy(),this._addElements.falsy||this.removeFalsy(),this._addElements.next||this.removeNext()}}])&&b(t.prototype,n),i&&b(t,i),e}(),O=n(0);function W(e){e.preventDefault()}document.body.addEventListener("touchstart",W,{passive:!1}),document.body.addEventListener("touchend",W,{passive:!1}),document.body.addEventListener("touchmove",W,{passive:!1});var T=new M("event",{attributes:{class:"event",style:{left:"20px",top:"20px"}}}),P=new M("function",{attributes:{class:"function",style:{left:"180px",top:"20px"}}}),D=new M("truthyFalsyBlock",{attributes:{class:"truthyFalsyBlock",style:{left:"20px",top:"90px"}}}),A=new M("truthyBlock",{attributes:{class:"truthyBlock",style:{left:"180px",top:"90px"}},fitting:{next:!1}}),z=new M(A,{attributes:{style:{left:"20px",top:"260px"}},fitting:{next:!0}}),E=new M("statement",{attributes:{class:"statement",style:{left:"180px",top:"200px"}}}),R=new M(E,{attributes:{style:{top:"260px"}},fitting:{next:!1}});_.isTouch()?document.body.innerHTML='<div class="build-container"><span class="build">Build date</span>'+'<span class="date">'.concat(O.a,"</span></div>"):console.log("Build date",O.a),document.body.appendChild(E.getDOMNode()),document.body.appendChild(R.getDOMNode()),document.body.appendChild(T.getDOMNode()),document.body.appendChild(P.getDOMNode()),document.body.appendChild(A.getDOMNode()),document.body.appendChild(z.getDOMNode()),document.body.appendChild(D.getDOMNode())}]);